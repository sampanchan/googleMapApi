{"version":3,"sources":["maps.js"],"names":["GoogleMapApi","evt","preventDefault","console","log","placeName","document","querySelector","value","placeRequest","location","map","getCenter","radius","query","service","google","maps","places","PlacesService","textSearch","handlePlaceResults","results","status","PlacesServiceStatus","OK","listContainer","createElement","setAttribute","classResults","appendChild","i","business","lat","geometry","lng","position","name","address","formatted_address","icon","image","photos","getUrl","rating","url","html_attributions","businessItemEl","nameEl","textContent","addressEl","imageEl","ratingEl","marker","Marker","title","infoWindowContent","opening_hours","isOpen","infoWindow","InfoWindow","content","addListener","open","length","form","addEventListener","handlePlaceSearch","theCircus","mapOptions","center","zoom","Map","getElementById","window","gMap","init"],"mappings":"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","sourcesContent":["class GoogleMapApi{\n\n    // same as localhost:8888\n    // API_BASE_URL = 'twitter-proxy.php'\n    API_KEY = 'AIzaSyBN8YgsGRhmpj0vSQlLl5EViZa3MGbrjr8'\n\n    init(){\n        console.log('google map init')\n        const form = document.querySelector('form[name=\"place_search\"]')\n        form.addEventListener('submit', this.handlePlaceSearch)\n    }\n\n    handlePlaceSearch = (evt) => {\n        evt.preventDefault()\n        console.log('handle place search ok')\n        var placeName = document.querySelector('#place').value\n\n        var placeRequest = {\n            location: this.map.getCenter(),\n            radius: 50,\n            query: placeName,\n        }\n        this.service = new google.maps.places.PlacesService(this.map)\n        this.service.textSearch(placeRequest, this.handlePlaceResults)\n    }\n\n    handlePlaceResults = (results, status) => {\n        console.log('handle result search ok')\n      \n\n        if (status == google.maps.places.PlacesServiceStatus.OK){\n            console.log('got results', results)\n\n            //list container\n            const listContainer = document.createElement('div');\n            listContainer.setAttribute('class', 'business-container');\n            const classResults = document.querySelector('.classResults')\n            classResults.appendChild(listContainer);\n            console.log('listcontainercreated')\n\n            // markers = [];\n            for ( let i = 0; i < results.length; i++){\n\n                const business = results[i];\n    \n                const lat  = business.geometry.location.lat();\n                const lng  = business.geometry.location.lng();\n                const position = { lat: lat, lng: lng};\n                const name = business.name;\n                const address = business.formatted_address;\n                // const hours = business.opening_hours.isOpen(name); // hours?\n                // phone#\n                // const number = business.getPhoneNumber();\n                const icon = business.icon;\n                const image = business.photos[0].getUrl();\n                const rating = business.rating;\n                const url = business.photos[0].html_attributions;\n\n                // list item\n                const businessItemEl = document.createElement('div');\n                businessItemEl.setAttribute('class', 'business-item');\n                listContainer.appendChild(businessItemEl);\n                console.log('businessitemcreated')\n\n                // Name\n\n                const nameEl = document.createElement('h2');\n                // businessItemEl.setAttribute('class', 'name-item');\n                businessItemEl.appendChild(nameEl);\n                nameEl.textContent = name;\n\n                // address\n\n                const addressEl = document.createElement('p');\n                // listContainer.setAttribute('class', 'address-p');\n                listContainer.appendChild(addressEl);\n                addressEl.textContent = address;\n\n                //image works\n\n                const imageEl = document.createElement('img');\n                businessItemEl.appendChild(imageEl);\n                imageEl.setAttribute('src', image)\n\n                //rating\n\n                const ratingEl = document.createElement('p');\n                businessItemEl.appendChild(ratingEl);\n                ratingEl.textContent = rating + \"/5\"\n\n\n                //marker\n                // let map;\n                \n\n                const marker = new google.maps.Marker({\n\n                    position: position,\n                    map: this.map,\n                    title: 'the circus',\n                   \n                    // label: 'the creative circus',\n                    // draggable: true,\n                });\n                // markers.push(marker);\n\n            \n                const infoWindowContent = `<div><img src=${business.icon} atl=\"\" width=\"20px\" height=\"20px\"></div>\n                                            <div>\n                                            <h3>${business.name}</h3>\n                                            <p>${business.formatted_address}</p>\n                                            \n                                            <p>${business.opening_hours.isOpen(name)}</p>\n                                            <img src=${business.photos[0].getUrl()} atl=\" width=\"50px\" height=\"50px\">\n                                            <p> rating: ${business.rating}/5</p>\n                                            </div> `\n                const infoWindow = new google.maps.InfoWindow({\n                 content: infoWindowContent,\n                })\n                marker.addListener('click', () => {\n                    infoWindow.open(this.map, marker)\n                   })\n                   \n\n            }\n\n            //  ASK GREG\n            // function setMpOnAll(map){\n            //     for (let i = 0; i < markers.length; i++) {\n            //         markers[i].setMap(map);\n            //       }\n            // }\n            // function showMarkers() {\n            //     setMapOnAll(map);\n            //   }\n\n            //   function deleteMarkers() {\n            //     clearMarkers();\n            //     markers = [];\n            //   }\n        }\n\n       \n\n       \n\n            \n        \n\n    }\n\n    ready(){\n\n        console.log('map is ready')\n\n        const theCircus = { lat: 33.81328, lng: -84.36175 } \n        const mapOptions = {\n            center: theCircus,\n            zoom:15,\n        }\n\n        this.map = new google.maps.Map(document.getElementById('map'), mapOptions)\n\n        const image = \"/dist/img/tent.png\"\n        const marker = new google.maps.Marker({\n            position: theCircus,\n            map: this.map,\n            title: 'the circus',\n            icon: image,\n            // label: 'the creative circus',\n            // draggable: true,\n        })\n\n\n        const infoWindowContent = `<div><h2>Join the Circus!!</h2><p> A place where you leave your worries behind and make new stress factors</p></div>`\n                    const infoWindow = new google.maps.InfoWindow({\n                     content: infoWindowContent,\n                    })\n                    marker.addListener('click', () => {\n                        infoWindow.open(this.map, marker)\n                       })\n\n\n        \n\n                    \n                    \n            \n        }\n        \n    }       \n    \n        \n\n       \n\n        \n    \n    \n\nwindow.gMap = new GoogleMapApi();\nwindow.gMap.init();\n\n"],"file":"maps.js"}