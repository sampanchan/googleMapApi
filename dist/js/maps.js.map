{"version":3,"sources":["maps.js"],"names":["GoogleMapApi","evt","preventDefault","console","log","placeName","document","querySelector","value","placeRequest","location","map","getCenter","radius","query","fields","service","google","maps","places","PlacesService","textSearch","handlePlaceResults","results","status","PlacesServiceStatus","OK","clearMarkers","forEach","result","createMarker","lat","geometry","lng","title","name","description","formatted_address","listContainer","createElement","setAttribute","classResults","appendChild","i","business","position","address","number","formatted_phone_number","icon","image","photos","getUrl","rating","url","html_attributions","businessItemEl","nameEl","textContent","addressEl","imageEl","ratingEl","marker","Marker","infoWindowContent","infoWindow","InfoWindow","content","addListener","open","length","form","addEventListener","handlePlaceSearch","options","windowContent","setContent","push","setMap","theCircus","mapOptions","center","zoom","Map","getElementById","window","gMap","init"],"mappings":"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","sourcesContent":["class GoogleMapApi{\n\n    // same as localhost:8888\n    // API_BASE_URL = 'twitter-proxy.php'\n    API_KEY = 'AIzaSyBN8YgsGRhmpj0vSQlLl5EViZa3MGbrjr8'\n    marker = []\n\n    init(){\n        console.log('google map init')\n        const form = document.querySelector('form[name=\"place_search\"]')\n        form.addEventListener('submit', this.handlePlaceSearch)\n    }\n\n    handlePlaceSearch = (evt) => {\n        evt.preventDefault()\n        console.log('handle place search ok')\n        var placeName = document.querySelector('#place').value\n\n        var placeRequest = {\n            location: this.map.getCenter(),\n            radius: 50,\n            query: placeName,\n            fields: ['formatted_phone_number'],\n        }\n        this.service = new google.maps.places.PlacesService(this.map)\n        this.service.textSearch(placeRequest, this.handlePlaceResults)\n    }\n\n    handlePlaceResults = (results, status) => {\n        console.log('handle result search ok')\n      \n\n        if (status == google.maps.places.PlacesServiceStatus.OK){\n            console.log('got results', results)\n\n            this.clearMarkers()\n\n            results.forEach((result) => {\n                this.createMarker({\n                    lat: result.geometry.location.lat(),\n                    lng: result.geometry.location.lng(),\n                    title: result.name,\n                    description: result.formatted_address,\n\n                })\n\n\n            })\n\n            //list container\n            const listContainer = document.createElement('div');\n            listContainer.setAttribute('class', 'business-container');\n            const classResults = document.querySelector('.classResults')\n            classResults.appendChild(listContainer);\n            console.log('listcontainercreated')\n\n            \n            for ( let i = 0; i < results.length; i++){\n\n                const business = results[i];\n    \n                const lat  = business.geometry.location.lat();\n                const lng  = business.geometry.location.lng();\n                const position = { lat: lat, lng: lng};\n                const name = business.name;\n                const address = business.formatted_address;\n                // const hours = business.opening_hours.isOpen(name); // hours?\n                // phone#\n                // const number = business.getPhoneNumber();\n                const number = business.formatted_phone_number;\n                const icon = business.icon;\n                const image = business.photos[0].getUrl();\n                const rating = business.rating;\n                const url = business.photos[0].html_attributions;\n\n                // list item\n                const businessItemEl = document.createElement('div');\n                businessItemEl.setAttribute('class', 'business-item');\n                listContainer.appendChild(businessItemEl);\n                console.log('businessitemcreated')\n\n                // Name\n\n                const nameEl = document.createElement('h2');\n                // businessItemEl.setAttribute('class', 'name-item');\n                businessItemEl.appendChild(nameEl);\n                nameEl.textContent = name;\n\n                // address\n\n                const addressEl = document.createElement('p');\n                // listContainer.setAttribute('class', 'address-p');\n                listContainer.appendChild(addressEl);\n                addressEl.textContent = address;\n\n                //image works\n\n                const imageEl = document.createElement('img');\n                businessItemEl.appendChild(imageEl);\n                imageEl.setAttribute('src', image)\n\n                //rating\n\n                const ratingEl = document.createElement('p');\n                businessItemEl.appendChild(ratingEl);\n                ratingEl.textContent = rating + \"/5\"\n\n\n                \n                // this.createMarker({\n                //     position: position,\n                //     map: this.map,\n                //     title: 'the circus',\n                //     infoWindowContent: `<div><img src=${business.icon} atl=\"\" width=\"20px\" height=\"20px\"></div>\n                //     <div>\n                //     <h3>${business.name}</h3>\n                //     <p>${business.formatted_address}</p>\n                //     <p>${business.formatted_phone_number}</p>\n                //     <p>${business.opening_hours.isOpen(name)}</p>\n                //     <img src=${business.photos[0].getUrl()} atl=\" width=\"50px\" height=\"50px\">\n                //     <p> rating: ${business.rating}/5</p>\n                //     </div> `\n                // })\n\n                const marker = new google.maps.Marker({\n\n                    position: position,\n                    map: this.map,\n                    title: 'the circus',\n                   \n                    // label: 'the creative circus',\n                    // draggable: true,\n                });\n\n            \n                const infoWindowContent = `<div><img src=${business.icon} atl=\"\" width=\"20px\" height=\"20px\"></div>\n                                            <div>\n                                            <h3>${business.name}</h3>\n                                            <p>${business.formatted_address}</p>\n                                            \n                                            \n                                            <img src=${business.photos[0].getUrl()} atl=\" width=\"50px\" height=\"50px\">\n                                            <p> rating: ${business.rating}/5</p>\n                                            </div> `\n                const infoWindow = new google.maps.InfoWindow({\n                 content: infoWindowContent,\n                })\n                marker.addListener('click', () => {\n                    infoWindow.open(this.map, marker)\n                   })\n                   \n\n            }\n        }\n    }\n\n    createMarker (options) {\n        \n        const marker = new google.maps.Marker({\n            position: {lat: options.lat, lng: options.lng},\n            map: this.map,\n            title: options.title,\n            icon: options.icon,\n            // label: 'the creative circus',\n            // draggable: true,\n        })\n\n\n        const infoWindowContent = options.windowContent\n        if (!this.infoWindow){\n            this.infoWindow = new google.maps.InfoWindow()\n        }\n                    // const infoWindow = new google.maps.InfoWindow({\n                    //  content: infoWindowContent,\n                    // })\n                    marker.addListener('click', () => {\n                        // infoWindow.open(this.map, marker)\n                        this.infoWindow.setContent(infoWindowContent)\n                        this.infoWindow.open(this.map, marker)\n                     })\n\n                     this.marker.push(marker)\n                    \n    } \n\n    clearMarkers(){\n        this.marker.forEach(marker => {\n            marker.setMap(null)\n        })\n\n        this.marker = []\n    }\n\n    ready(){\n\n        console.log('map is ready')\n\n        const theCircus = { lat: 33.81328, lng: -84.36175 } \n        const mapOptions = {\n            center: theCircus,\n            zoom:15,\n        }\n\n        this.map = new google.maps.Map(document.getElementById('map'), mapOptions)\n\n        const image = \"/dist/img/tent.png\"\n        this.createMarker({\n            lat: theCircus.lat,\n            lng: theCircus.lng,\n            title: ' The circus',\n            icon: image,\n            windowContent:`<div><h2>Join the Circus!!</h2><p> A place where you leave your worries behind and make new stress factors</p></div>`,\n        })\n        // const image = \"/dist/img/tent.png\"\n        // const marker = new google.maps.Marker({\n        //     position: theCircus,\n        //     map: this.map,\n        //     title: 'the circus',\n        //     icon: image,\n        //     // label: 'the creative circus',\n        //     // draggable: true,\n        // })\n\n\n        // const infoWindowContent = `<div><h2>Join the Circus!!</h2><p> A place where you leave your worries behind and make new stress factors</p></div>`\n        //             const infoWindow = new google.maps.InfoWindow({\n        //              content: infoWindowContent,\n        //             })\n        //             marker.addListener('click', () => {\n        //                 infoWindow.open(this.map, marker)\n        //                })\n\n\n        \n\n                    \n                    \n            \n        }\n        \n    }       \n    \n        \n\n       \n\n        \n    \n    \n\nwindow.gMap = new GoogleMapApi();\nwindow.gMap.init();\n\n"],"file":"maps.js"}